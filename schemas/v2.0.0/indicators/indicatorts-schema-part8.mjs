// Split from indicators/indicatorts-schema.mjs
// Part 8 of 10
// Migrated from v1.2.0 -> v2.0.0
// Category: handlers-imports
// 78 routes (v2 max: 8) — needs splitting
// requiredLibraries: indicatorts
// Import: import * as indicators from 'indicatorts'
// Module-level code: 362 lines

export const main = {
    namespace: 'indicatorts',
    name: 'OHLCV Indicators (Part 8)',
    description: 'Compute 80+ technical analysis indicators from OHLCV data using the indicatorts library. Covers momentum (RSI, MACD, Stochastic), trend (SMA, EMA, Bollinger Bands, Ichimoku), volume (OBV, VWAP, MFI) indicators and their BUY/SELL/HOLD trading strategies. No external API — all computation is local.',
    version: '2.0.0',
    docs: ['https://github.com/cinar/indicatorts'],
    tags: ['trading', 'indicators', 'analysis', 'cacheTtlFrequent'],
    root: 'https://...',
    routes: {
        getRollingMovingAverage: {
            method: 'GET',
            path: '/',
            description: 'Rolling Moving Average (RMA): The rma function calculates the rolling moving average for a given period. Technical Description: R[0] to R[p-1] is SMA(values); R[p] and after is R[i] = ((R[i-1]*(p-1)) + v[i]) / p',
            parameters: [
                { position: { key: 'values', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } },
                { position: { key: 'period', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'number()', options: ['optional()', 'default(4)'] } }
            ],
            tests: [
                {
                    _description: 'Compute getRollingMovingAverage with sample OHLCV data',
                    values: '100,102,101,103,105,104,106,108,107,109,111,110,112,114,113,115,117,116,118,120'
                }
            ],
        },
        getRsi2Strategy: {
            method: 'GET',
            path: '/',
            description: 'RSI 2 Strategy: The rsi2Strategy uses the _rsi_ values that are generated by the RSI 2 indicator function to provide a _BUY_ action when 2-period RSI moves below 10, and a _SELL_ action when the 2-period RSI moved above 90, and a _HOLD_ action otherwise. Technical Description: null',
            parameters: [
                { position: { key: 'asset', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } }
            ],
            tests: [
                {
                    _description: 'Compute getRsi2Strategy with sample OHLCV data',
                    asset: '{"closings":[100,102,101,103,105,104,106,108,107,109,111,110,112,114,113,115,117,116,118,120],"highs":[101,103,102,104,106,105,107,109,108,110,112,111,113,115,114,116,118,117,119,121],"lows":[99,101,100,102,104,103,105,107,106,108,110,109,111,113,112,114,116,115,117,119],"openings":[100,101,102,102,104,105,105,107,108,108,110,111,111,113,114,114,116,117,117,119],"volumes":[1000,1200,900,1100,1300,800,1000,1400,900,1200,1100,1000,1300,1500,800,1200,1000,1100,900,1400]}'
                }
            ],
        },
        getSimpleMovingAverage: {
            method: 'GET',
            path: '/',
            description: 'Simple Moving Average (SMA): The sma function calculates the simple moving average for a given period. Technical Description: null',
            parameters: [
                { position: { key: 'values', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } },
                { position: { key: 'period', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'number()', options: ['optional()', 'default(2)'] } }
            ],
            tests: [
                {
                    _description: 'Compute getSimpleMovingAverage with sample OHLCV data',
                    values: '100,102,101,103,105,104,106,108,107,109,111,110,112,114,113,115,117,116,118,120'
                }
            ],
        },
        getSince: {
            method: 'GET',
            path: '/',
            description: 'Since Change: The since function provides the number values since the last change. Technical Description: null',
            parameters: [
                { position: { key: 'values', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } }
            ],
            tests: [
                {
                    _description: 'Compute getSince with sample OHLCV data',
                    values: '100,102,101,103,105,104,106,108,107,109,111,110,112,114,113,115,117,116,118,120'
                }
            ],
        },
        getStochasticOscillator: {
            method: 'GET',
            path: '/',
            description: 'Stochastic Oscillator (STOCH): The stochasticOscillator function calculates a momentum indicator that shows the location of the closing relative to high-low range over a set number of periods. Technical Description: K = (Closing - Lowest Low) / (Highest High - Lowest Low) * 100; D = 3-Period SMA of K',
            parameters: [
                { position: { key: 'highs', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } },
                { position: { key: 'lows', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } },
                { position: { key: 'closings', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } },
                { position: { key: 'kPeriod', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'number()', options: ['optional()', 'default(14)'] } },
                { position: { key: 'dPeriod', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'number()', options: ['optional()', 'default(3)'] } }
            ],
            tests: [
                {
                    _description: 'Compute getStochasticOscillator with sample OHLCV data',
                    highs: '101,103,102,104,106,105,107,109,108,110,112,111,113,115,114,116,118,117,119,121',
                    lows: '99,101,100,102,104,103,105,107,106,108,110,109,111,113,112,114,116,115,117,119',
                    closings: '100,102,101,103,105,104,106,108,107,109,111,110,112,114,113,115,117,116,118,120'
                }
            ],
        },
        getStochasticOscillatorStrategy: {
            method: 'GET',
            path: '/',
            description: 'Stochastic Oscillator Strategy: The stochasticOscillatorStrategy uses the _ao_ values that are generated by the Stochastic Oscillator indicator function to provide a _BUY_ action when _k_ and _d_ are less than 20, a _SELL_ action when the _k_ and _d_ are greather than 80, a _HOLD_ action otherwise. Technical Description: null',
            parameters: [
                { position: { key: 'asset', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } },
                { position: { key: 'kPeriod', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'number()', options: ['optional()', 'default(14)'] } },
                { position: { key: 'dPeriod', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'number()', options: ['optional()', 'default(3)'] } }
            ],
            tests: [
                {
                    _description: 'Compute getStochasticOscillatorStrategy with sample OHLCV data',
                    asset: '{"closings":[100,102,101,103,105,104,106,108,107,109,111,110,112,114,113,115,117,116,118,120],"highs":[101,103,102,104,106,105,107,109,108,110,112,111,113,115,114,116,118,117,119,121],"lows":[99,101,100,102,104,103,105,107,106,108,110,109,111,113,112,114,116,115,117,119],"openings":[100,101,102,102,104,105,105,107,108,108,110,111,111,113,114,114,116,117,117,119],"volumes":[1000,1200,900,1100,1300,800,1000,1400,900,1200,1100,1000,1300,1500,800,1200,1000,1100,900,1400]}'
                }
            ],
        },
        getTriangularMovingAverage: {
            method: 'GET',
            path: '/',
            description: 'Triangular Moving Average (TRIMA): The trima function calculates the Triangular Moving Average (TRIMA) for a given period. It is a weighted moving average putting more weight to the middle values. Technical Description: If period is even: TRIMA = SMA(period / 2, SMA((period / 2) + 1, values)); If period is odd: TRIMA = SMA((period + 1) / 2, SMA((period + 1) / 2, values))',
            parameters: [
                { position: { key: 'values', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } },
                { position: { key: 'period', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'number()', options: ['optional()', 'default(4)'] } }
            ],
            tests: [
                {
                    _description: 'Compute getTriangularMovingAverage with sample OHLCV data',
                    values: '100,102,101,103,105,104,106,108,107,109,111,110,112,114,113,115,117,116,118,120'
                }
            ],
        },
        getTripleExponentialAverage: {
            method: 'GET',
            path: '/',
            description: 'Triple Exponential Average (TRIX): The trix indicator is an oscillator used to identify oversold and overbought markets, and it can also be used as a momentum indicator. Technical Description: EMA1 = EMA(period, values); EMA2 = EMA(period, EMA1); EMA3 = EMA(period, EMA2); TRIX = (EMA3 - Previous EMA3) / Previous EMA3',
            parameters: [
                { position: { key: 'values', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'string()', options: [] } },
                { position: { key: 'period', value: '{{USER_PARAM}}', location: 'insert' }, z: { primitive: 'number()', options: ['optional()', 'default(4)'] } }
            ],
            tests: [
                {
                    _description: 'Compute getTripleExponentialAverage with sample OHLCV data',
                    values: '100,102,101,103,105,104,106,108,107,109,111,110,112,114,113,115,117,116,118,120'
                }
            ],
        }
    },
    requiredLibraries: ['indicatorts']
}


export const handlers = ( { sharedLists, libraries } ) => {
    const indicatorts = libraries['indicatorts']

    function getIndicator( functionName, data, params, routeName ) {
        if( functionName === 'priceRateOfChange' ) {
            data['closings'] = data['closings']
                .reduce( ( acc, n ) => {
                    if( n === 0 ) { return acc }
                    acc.push( n )
                    return acc
                }, [] )
        } else if( functionName === 'parabolicSar' ) {
            functionName = 'psar'
        } else if( functionName === 'bollingerBandsWidth' ) {
            const bbResult = indicators[ 'bollingerBands' ]( ...Object.values( data ) )
            const result = indicators[ functionName ]( bbResult, params ) 
            return result
        }
        const result = indicators[ functionName ]( ...Object.values( data ), params )
        return result 
    }
    const availableIndicators = {
    	getAbsolutePriceOscillator: {
    		validate: [["values"],["fast","slow"],["apo"]],
    		handler: ( data, params, routeName ) => getIndicator( 'absolutePriceOscillator', data, params, routeName ),
    	},
    	getAbsolutePriceOscillatorStrategy: {
    		validate: [["asset"],["fast","slow"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'absolutePriceOscillatorStrategy', data, params, routeName ),
    	},
    	getAbsolutePriceOscillatorStrategy: {
    		validate: [["asset"],["fast","slow"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'absolutePriceOscillatorStrategy', data, params, routeName ),
    	},
    	getAccelerationBands: {
    		validate: [["highs","lows","closings"],["period","multiplier"],["upper","middle","lower"]],
    		handler: ( data, params, routeName ) => getIndicator( 'accelerationBands', data, params, routeName ),
    	},
    	getAccelerationBandsStrategy: {
    		validate: [["asset"],["period","multiplier"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'accelerationBandsStrategy', data, params, routeName ),
    	},
    	getAccumulationDistribution: {
    		validate: [["highs","lows","closings","volumes"],[],["ad"]],
    		handler: ( data, params, routeName ) => getIndicator( 'accumulationDistribution', data, params, routeName ),
    	},
    	getAroon: {
    		validate: [["highs","lows"],["period"],["up","down"]],
    		handler: ( data, params, routeName ) => getIndicator( 'aroon', data, params, routeName ),
    	},
    	getAroonStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'aroonStrategy', data, params, routeName ),
    	},
    	getAroonStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'aroonStrategy', data, params, routeName ),
    	},
    	getAverageTrueRange: {
    		validate: [["highs","lows","closings"],["period"],["trLine","atrLine"]],
    		handler: ( data, params, routeName ) => getIndicator( 'averageTrueRange', data, params, routeName ),
    	},
    	getAwesomeOscillator: {
    		validate: [["highs","lows"],["fast","slow"],["ao"]],
    		handler: ( data, params, routeName ) => getIndicator( 'awesomeOscillator', data, params, routeName ),
    	},
    	getAwesomeOscillatorStrategy: {
    		validate: [["asset"],["fast","slow"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'awesomeOscillatorStrategy', data, params, routeName ),
    	},
    	getBalanceOfPower: {
    		validate: [["openings","highs","lows","closings"],[],["bop"]],
    		handler: ( data, params, routeName ) => getIndicator( 'balanceOfPower', data, params, routeName ),
    	},
    	getBalanceOfPowerStrategy: {
    		validate: [["asset"],[],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'balanceOfPowerStrategy', data, params, routeName ),
    	},
    	getBalanceOfPowerStrategy: {
    		validate: [["asset"],[],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'balanceOfPowerStrategy', data, params, routeName ),
    	},
    	getBollingerBands: {
    		validate: [["closings"],["period"],["upper","middle","lower"]],
    		handler: ( data, params, routeName ) => getIndicator( 'bollingerBands', data, params, routeName ),
    	},
    	getBollingerBandsStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'bollingerBandsStrategy', data, params, routeName ),
    	},
    	getBollingerBandsWidth: {
    		validate: [["closings"],["period"],["width","widthEma"]],
    		handler: ( data, params, routeName ) => getIndicator( 'bollingerBandsWidth', data, params, routeName ),
    	},
    	getChaikinMoneyFlow: {
    		validate: [["highs","lows","closings","volumes"],["period"],["cmf"]],
    		handler: ( data, params, routeName ) => getIndicator( 'chaikinMoneyFlow', data, params, routeName ),
    	},
    	getChaikinMoneyFlowStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'chaikinMoneyFlowStrategy', data, params, routeName ),
    	},
    	getChaikinOscillator: {
    		validate: [["highs","lows","closings","volumes"],["fast","slow"],["adResult","cmoResult"]],
    		handler: ( data, params, routeName ) => getIndicator( 'chaikinOscillator', data, params, routeName ),
    	},
    	getChandeForecastOscillator: {
    		validate: [["closings"],[],["cfo"]],
    		handler: ( data, params, routeName ) => getIndicator( 'chandeForecastOscillator', data, params, routeName ),
    	},
    	getChandeForecastOscillatorStrategy: {
    		validate: [["asset"],[],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'chandeForecastOscillatorStrategy', data, params, routeName ),
    	},
    	getChandeForecastOscillatorStrategy: {
    		validate: [["asset"],[],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'chandeForecastOscillatorStrategy', data, params, routeName ),
    	},
    	getChandelierExit: {
    		validate: [["highs","lows","closings"],["period"],["long","short"]],
    		handler: ( data, params, routeName ) => getIndicator( 'chandelierExit', data, params, routeName ),
    	},
    	getCommunityChannelIndex: {
    		validate: [["highs","lows","closings"],["period"],["cci"]],
    		handler: ( data, params, routeName ) => getIndicator( 'communityChannelIndex', data, params, routeName ),
    	},
    	getDonchianChannel: {
    		validate: [["closings"],["period"],["upper","middle","lower"]],
    		handler: ( data, params, routeName ) => getIndicator( 'donchianChannel', data, params, routeName ),
    	},
    	getDoubleExponentialMovingAverage: {
    		validate: [["values"],["period"],["dema"]],
    		handler: ( data, params, routeName ) => getIndicator( 'doubleExponentialMovingAverage', data, params, routeName ),
    	},
    	getEaseOfMovement: {
    		validate: [["highs","lows","volumes"],["period"],["emv"]],
    		handler: ( data, params, routeName ) => getIndicator( 'easeOfMovement', data, params, routeName ),
    	},
    	getEaseOfMovementStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'easeOfMovementStrategy', data, params, routeName ),
    	},
    	getExponentialMovingAverage: {
    		validate: [["values"],["period"],["ema"]],
    		handler: ( data, params, routeName ) => getIndicator( 'exponentialMovingAverage', data, params, routeName ),
    	},
    	getForceIndex: {
    		validate: [["closings","volumes"],["period"],["fi"]],
    		handler: ( data, params, routeName ) => getIndicator( 'forceIndex', data, params, routeName ),
    	},
    	getForceIndexStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'forceIndexStrategy', data, params, routeName ),
    	},
    	getIchimokuCloud: {
    		validate: [["highs","lows","closings"],["short","medium","long","close"],["tenkan","kijub","ssa","ssb","leadingSpan"]],
    		handler: ( data, params, routeName ) => getIndicator( 'ichimokuCloud', data, params, routeName ),
    	},
    	getIchimokuCloudStrategy: {
    		validate: [["asset"],["short","medium","long","close"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'ichimokuCloudStrategy', data, params, routeName ),
    	},
    	getKdjStrategy: {
    		validate: [["asset"],["rPeriod","kPeriod","dPeriod"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'kdjStrategy', data, params, routeName ),
    	},
    	getKdjStrategy: {
    		validate: [["asset"],["rPeriod","kPeriod","dPeriod"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'kdjStrategy', data, params, routeName ),
    	},
    	getKeltnerChannel: {
    		validate: [["highs","lows","closings"],["period"],["upper","middle","lower"]],
    		handler: ( data, params, routeName ) => getIndicator( 'keltnerChannel', data, params, routeName ),
    	},
    	getMassIndex: {
    		validate: [["highs","lows"],["emaPeriod","miPeriod"],["mi"]],
    		handler: ( data, params, routeName ) => getIndicator( 'massIndex', data, params, routeName ),
    	},
    	getMoneyFlowIndex: {
    		validate: [["highs","lows","closings","volumes"],["period"],["mfi"]],
    		handler: ( data, params, routeName ) => getIndicator( 'moneyFlowIndex', data, params, routeName ),
    	},
    	getMoneyFlowIndexStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'moneyFlowIndexStrategy', data, params, routeName ),
    	},
    	getMovingAverageConvergenceDivergence: {
    		validate: [["closings"],["fast","slow","signal"],["macdLine","signalLine"]],
    		handler: ( data, params, routeName ) => getIndicator( 'movingAverageConvergenceDivergence', data, params, routeName ),
    	},
    	getMovingAverageConvergenceDivergenceStrategy: {
    		validate: [["asset"],["fast","slow","signal"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'movingAverageConvergenceDivergenceStrategy', data, params, routeName ),
    	},
    	getMovingChandeForecastOscillator: {
    		validate: [["closings"],["period"],["mfco"]],
    		handler: ( data, params, routeName ) => getIndicator( 'movingChandeForecastOscillator', data, params, routeName ),
    	},
    	getMovingMax: {
    		validate: [["values"],["period"],["mmax"]],
    		handler: ( data, params, routeName ) => getIndicator( 'movingMax', data, params, routeName ),
    	},
    	getMovingMin: {
    		validate: [["values"],["period"],["mmin"]],
    		handler: ( data, params, routeName ) => getIndicator( 'movingMin', data, params, routeName ),
    	},
    	getMovingStandardDeviation: {
    		validate: [["values"],["period"],["result"]],
    		handler: ( data, params, routeName ) => getIndicator( 'movingStandardDeviation', data, params, routeName ),
    	},
    	getMovingSum: {
    		validate: [["values"],["period"],["msum"]],
    		handler: ( data, params, routeName ) => getIndicator( 'movingSum', data, params, routeName ),
    	},
    	getNegativeVolumeIndex: {
    		validate: [["closings","volumes"],["start","period"],["nvi"]],
    		handler: ( data, params, routeName ) => getIndicator( 'negativeVolumeIndex', data, params, routeName ),
    	},
    	getNegativeVolumeIndexStrategy: {
    		validate: [["asset"],["start","period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'negativeVolumeIndexStrategy', data, params, routeName ),
    	},
    	getOnBalanceVolume: {
    		validate: [["closings","volumes"],[],["obv"]],
    		handler: ( data, params, routeName ) => getIndicator( 'onBalanceVolume', data, params, routeName ),
    	},
    	getParabolicSar: {
    		validate: [["highs","lows","closings"],["step","max"],["trends","psarResult"]],
    		handler: ( data, params, routeName ) => getIndicator( 'parabolicSar', data, params, routeName ),
    	},
    	getParabolicSARStrategy: {
    		validate: [["asset"],["step","max"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'parabolicSARStrategy', data, params, routeName ),
    	},
    	getPercentagePriceOscillator: {
    		validate: [["prices"],["fast","slow","signal"],["ppoResult","signal","histogram"]],
    		handler: ( data, params, routeName ) => getIndicator( 'percentagePriceOscillator', data, params, routeName ),
    	},
    	getPercentageVolumeOscillator: {
    		validate: [["volumes"],["fast","slow","signal"],["pvoResult","signal","histogram"]],
    		handler: ( data, params, routeName ) => getIndicator( 'percentageVolumeOscillator', data, params, routeName ),
    	},
    	getPriceRateOfChange: {
    		validate: [["closings"],["period"],["roc"]],
    		handler: ( data, params, routeName ) => getIndicator( 'priceRateOfChange', data, params, routeName ),
    	},
    	getProjectionOscillator: {
    		validate: [["highs","lows","closings"],["period","smooth"],["poResult","spoResult"]],
    		handler: ( data, params, routeName ) => getIndicator( 'projectionOscillator', data, params, routeName ),
    	},
    	getProjectionOscillatorStrategy: {
    		validate: [["asset"],["period","smooth"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'projectionOscillatorStrategy', data, params, routeName ),
    	},
    	getQstick: {
    		validate: [["openings","closings"],["period"],["qstick"]],
    		handler: ( data, params, routeName ) => getIndicator( 'qstick', data, params, routeName ),
    	},
    	getRandomIndex: {
    		validate: [["highs","lows","closings"],["rPeriod","kPeriod","dPeriod"],["k","d","j"]],
    		handler: ( data, params, routeName ) => getIndicator( 'randomIndex', data, params, routeName ),
    	},
    	getRelativeStrengthIndex: {
    		validate: [["closings"],["period"],["rsi"]],
    		handler: ( data, params, routeName ) => getIndicator( 'relativeStrengthIndex', data, params, routeName ),
    	},
    	getRollingMovingAverage: {
    		validate: [["values"],["period"],["rma"]],
    		handler: ( data, params, routeName ) => getIndicator( 'rollingMovingAverage', data, params, routeName ),
    	},
    	getRsi2Strategy: {
    		validate: [["asset"],[],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'rsi2Strategy', data, params, routeName ),
    	},
    	getSimpleMovingAverage: {
    		validate: [["values"],["period"],["sma"]],
    		handler: ( data, params, routeName ) => getIndicator( 'simpleMovingAverage', data, params, routeName ),
    	},
    	getSince: {
    		validate: [["values"],[],["since"]],
    		handler: ( data, params, routeName ) => getIndicator( 'since', data, params, routeName ),
    	},
    	getStochasticOscillator: {
    		validate: [["highs","lows","closings"],["kPeriod","dPeriod"],["k","d"]],
    		handler: ( data, params, routeName ) => getIndicator( 'stochasticOscillator', data, params, routeName ),
    	},
    	getStochasticOscillatorStrategy: {
    		validate: [["asset"],["kPeriod","dPeriod"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'stochasticOscillatorStrategy', data, params, routeName ),
    	},
    	getTriangularMovingAverage: {
    		validate: [["values"],["period"],["trima"]],
    		handler: ( data, params, routeName ) => getIndicator( 'triangularMovingAverage', data, params, routeName ),
    	},
    	getTripleExponentialAverage: {
    		validate: [["values"],["period"],["trix"]],
    		handler: ( data, params, routeName ) => getIndicator( 'tripleExponentialAverage', data, params, routeName ),
    	},
    	getTripleExponentialMovingAverage: {
    		validate: [["values"],["period"],["tema"]],
    		handler: ( data, params, routeName ) => getIndicator( 'tripleExponentialMovingAverage', data, params, routeName ),
    	},
    	getTrueRange: {
    		validate: [["highs","lows","closings"],[],["result"]],
    		handler: ( data, params, routeName ) => getIndicator( 'trueRange', data, params, routeName ),
    	},
    	getTypicalPrice: {
    		validate: [["highs","lows","closings"],[],["typprice"]],
    		handler: ( data, params, routeName ) => getIndicator( 'typicalPrice', data, params, routeName ),
    	},
    	getTypicalPriceStrategy: {
    		validate: [["asset"],[],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'typicalPriceStrategy', data, params, routeName ),
    	},
    	getUlcerIndex: {
    		validate: [["closings"],["period"],["result"]],
    		handler: ( data, params, routeName ) => getIndicator( 'ulcerIndex', data, params, routeName ),
    	},
    	getVolumePriceTrend: {
    		validate: [["closings","volumes"],[],["vpt"]],
    		handler: ( data, params, routeName ) => getIndicator( 'volumePriceTrend', data, params, routeName ),
    	},
    	getVolumeWeightedAveragePrice: {
    		validate: [["closings","volumes"],["period"],["vwap"]],
    		handler: ( data, params, routeName ) => getIndicator( 'volumeWeightedAveragePrice', data, params, routeName ),
    	},
    	getVolumeWeightedAveragePriceStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'volumeWeightedAveragePriceStrategy', data, params, routeName ),
    	},
    	getVolumeWeightedMovingAverage: {
    		validate: [["closings","volumes"],["period"],["vwma"]],
    		handler: ( data, params, routeName ) => getIndicator( 'volumeWeightedMovingAverage', data, params, routeName ),
    	},
    	getVolumeWeightedMovingAverageStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'volumeWeightedMovingAverageStrategy', data, params, routeName ),
    	},
    	getVortex: {
    		validate: [["highs","lows","closings"],["period"],["plus","minus"]],
    		handler: ( data, params, routeName ) => getIndicator( 'vortex', data, params, routeName ),
    	},
    	getVortexStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'vortexStrategy', data, params, routeName ),
    	},
    	getWilliamsR: {
    		validate: [["highs","lows","closings"],["period"],["willr"]],
    		handler: ( data, params, routeName ) => getIndicator( 'williamsR', data, params, routeName ),
    	},
    	getWilliamsRStrategy: {
    		validate: [["asset"],["period"],["actions"]],
    		handler: ( data, params, routeName ) => getIndicator( 'williamsRStrategy', data, params, routeName ),
    	}
    }
    const asset = {
        openings: [174060087.38879,174082898.8875936,174100153.56421843,174108592.70029056,174108073.85755652,173940776.5809026,173855038.04088858,173827303.93736708,173826777.1790663,174029399.594358,174086187.0741313,174170809.98403883,174176745.15932336,174194481.76776877,174258673.24893585,174316607.9053444,174344011.26589838,174344011.26648745,174192938.99197102,173896061.10363784,173873469.088895,173812410.16945913,173804695.39251307,173802489.8931474,173784622.98496273,173772265.04479375,173771037.48695257,173762313.21057478,173756232.131773,173751783.5620917,173745545.74319085,173752908.8941859,173744262.17871326,173733708.32261872,173733332.95199195,173753288.3215156,173751359.30583143,173750456.0907409,173855510.3958166,173855510.39640403,173910666.20618278,173924303.85632855,174025449.1938566,173955454.33147314,173860820.5666938,173850681.85198057,173847999.08108395,174007912.50842893,174007910.7239786,173925165.36047944],
        closings: [174082898.8875936,174100153.56421843,174108592.70029056,174108073.85755652,173940776.5809026,173855038.04088858,173827303.93736708,173826777.1790663,174029399.594358,174086187.0741313,174170809.98403883,174176745.15932336,174194481.76776877,174258673.24893585,174316607.9053444,174344011.26589838,174344011.26648745,174192938.99197102,173896061.10363784,173873469.088895,173812410.16945913,173804695.39251307,173802489.8931474,173784622.98496273,173772265.04479375,173771037.48695257,173762313.21057478,173756232.131773,173751783.5620917,173745545.74319085,173752908.8941859,173744262.17871326,173733708.32261872,173733332.95199195,173753288.3215156,173751359.30583143,173750456.0907409,173855510.3958166,173855510.39640403,173910666.20618278,173924303.85632855,174025449.1938566,173955454.33147314,173860820.5666938,173850681.85198057,173847999.08108395,174007912.50842893,174007910.7239786,173925165.36047944,174001913.66047117],
        highs:    [174082898.8875936,174100153.56421843,174108592.70029056,174108592.70029056,174108073.85755652,173940776.5809026,173855038.04088858,173827303.93736708,174029399.594358,174086187.0741313,174170809.98403883,174176745.15932336,174194481.76776877,174258673.24893585,174316607.9053444,174344011.26589838,174344011.26648745,174344011.26648745,174192938.99197102,173896061.10363784,173873469.088895,173812410.16945913,173804695.39251307,173802489.8931474,173784622.98496273,173772265.04479375,173771037.48695257,173762313.21057478,173756232.131773,173751783.5620917,173752908.8941859,173752908.8941859,173744262.17871326,173733708.32261872,173753288.3215156,173753288.3215156,173751359.30583143,173855510.3958166,173855510.39640403,173910666.20618278,173924303.85632855,174025449.1938566,174025449.1938566,173955454.33147314,173860820.5666938,173850681.85198057,174007912.50842893,174007913.7991547,174007910.7239786,174001913.66047117],
        lows:     [174060087.38879,174082898.8875936,174100153.56421843,174108073.85755652,173940776.5809026,173855038.04088858,173827303.93736708,173826777.1790663,173826777.1790663,174029399.594358,174086187.0741313,174170809.98403883,174176745.15932336,174194481.76776877,174258673.24893585,174316607.9053444,174344011.26589838,174192938.99197102,173896061.10363784,173873469.088895,173812410.16945913,173804695.39251307,173802489.8931474,173784622.98496273,173772265.04479375,173771037.48695257,173762313.21057478,173756232.131773,173751783.5620917,173745545.74319085,173745545.74319085,173744262.17871326,173733708.32261872,173733332.95199195,173733332.95199195,173751359.30583143,173750456.0907409,173750456.0907409,173855510.3958166,173855510.39640403,173910666.20618278,173924303.85632855,173955454.33147314,173860820.5666938,173850681.85198057,173847999.08108395,173847999.08108395,174007910.7239786,173925165.36047944,173925165.36047944],
        volumes:  [1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797,1896454.1787483797],
        prices:   [174082898.8875936,174100153.56421843,174108592.70029056,174108073.85755652,173940776.5809026,173855038.04088858,173827303.93736708,173826777.1790663,174029399.594358,174086187.0741313,174170809.98403883,174176745.15932336,174194481.76776877,174258673.24893585,174316607.9053444,174344011.26589838,174344011.26648745,174192938.99197102,173896061.10363784,173873469.088895,173812410.16945913,173804695.39251307,173802489.8931474,173784622.98496273,173772265.04479375,173771037.48695257,173762313.21057478,173756232.131773,173751783.5620917,173745545.74319085,173752908.8941859,173744262.17871326,173733708.32261872,173733332.95199195,173753288.3215156,173751359.30583143,173750456.0907409,173855510.3958166,173855510.39640403,173910666.20618278,173924303.85632855,174025449.1938566,173955454.33147314,173860820.5666938,173850681.85198057,173847999.08108395,174007912.50842893,174007910.7239786,173925165.36047944,174001913.66047117],
        values:   [174082898.8875936,174100153.56421843,174108592.70029056,174108073.85755652,173940776.5809026,173855038.04088858,173827303.93736708,173826777.1790663,174029399.594358,174086187.0741313,174170809.98403883,174176745.15932336,174194481.76776877,174258673.24893585,174316607.9053444,174344011.26589838,174344011.26648745,174192938.99197102,173896061.10363784,173873469.088895,173812410.16945913,173804695.39251307,173802489.8931474,173784622.98496273,173772265.04479375,173771037.48695257,173762313.21057478,173756232.131773,173751783.5620917,173745545.74319085,173752908.8941859,173744262.17871326,173733708.32261872,173733332.95199195,173753288.3215156,173751359.30583143,173750456.0907409,173855510.3958166,173855510.39640403,173910666.20618278,173924303.85632855,174025449.1938566,173955454.33147314,173860820.5666938,173850681.85198057,173847999.08108395,174007912.50842893,174007910.7239786,173925165.36047944,174001913.66047117],
        dates:    ['2025-05-15T20:40:42.148Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z','2025-05-15T20:40:42.149Z']
    }

    return {
        getRollingMovingAverage: {
            executeRequest: async ( { struct, payload } ) => {
                const __routeName = 'getRollingMovingAverage'
                const { userParams } = payload
                const [ input, p, outputs ] = availableIndicators[ __routeName ]['validate']

                const data = input
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const params = p
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const { handler } = availableIndicators[ __routeName ]
                struct['data'] = handler( data, params, __routeName )

                return { struct }
            }
        },
        getRsi2Strategy: {
            executeRequest: async ( { struct, payload } ) => {
                const __routeName = 'getRsi2Strategy'
                const { userParams } = payload
                const [ input, p, outputs ] = availableIndicators[ __routeName ]['validate']

                const data = input
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const params = p
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const { handler } = availableIndicators[ __routeName ]
                struct['data'] = handler( data, params, __routeName )

                return { struct }
            }
        },
        getSimpleMovingAverage: {
            executeRequest: async ( { struct, payload } ) => {
                const __routeName = 'getSimpleMovingAverage'
                const { userParams } = payload
                const [ input, p, outputs ] = availableIndicators[ __routeName ]['validate']

                const data = input
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const params = p
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const { handler } = availableIndicators[ __routeName ]
                struct['data'] = handler( data, params, __routeName )

                return { struct }
            }
        },
        getSince: {
            executeRequest: async ( { struct, payload } ) => {
                const __routeName = 'getSince'
                const { userParams } = payload
                const [ input, p, outputs ] = availableIndicators[ __routeName ]['validate']

                const data = input
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const params = p
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const { handler } = availableIndicators[ __routeName ]
                struct['data'] = handler( data, params, __routeName )

                return { struct }
            }
        },
        getStochasticOscillator: {
            executeRequest: async ( { struct, payload } ) => {
                const __routeName = 'getStochasticOscillator'
                const { userParams } = payload
                const [ input, p, outputs ] = availableIndicators[ __routeName ]['validate']

                const data = input
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const params = p
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const { handler } = availableIndicators[ __routeName ]
                struct['data'] = handler( data, params, __routeName )

                return { struct }
            }
        },
        getStochasticOscillatorStrategy: {
            executeRequest: async ( { struct, payload } ) => {
                const __routeName = 'getStochasticOscillatorStrategy'
                const { userParams } = payload
                const [ input, p, outputs ] = availableIndicators[ __routeName ]['validate']

                const data = input
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const params = p
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const { handler } = availableIndicators[ __routeName ]
                struct['data'] = handler( data, params, __routeName )

                return { struct }
            }
        },
        getTriangularMovingAverage: {
            executeRequest: async ( { struct, payload } ) => {
                const __routeName = 'getTriangularMovingAverage'
                const { userParams } = payload
                const [ input, p, outputs ] = availableIndicators[ __routeName ]['validate']

                const data = input
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const params = p
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const { handler } = availableIndicators[ __routeName ]
                struct['data'] = handler( data, params, __routeName )

                return { struct }
            }
        },
        getTripleExponentialAverage: {
            executeRequest: async ( { struct, payload } ) => {
                const __routeName = 'getTripleExponentialAverage'
                const { userParams } = payload
                const [ input, p, outputs ] = availableIndicators[ __routeName ]['validate']

                const data = input
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const params = p
                .reduce( ( acc, key ) => { acc[ key ] = userParams[ key ]; return acc }, {} )
                const { handler } = availableIndicators[ __routeName ]
                struct['data'] = handler( data, params, __routeName )

                return { struct }
            }
        }
    }
}
